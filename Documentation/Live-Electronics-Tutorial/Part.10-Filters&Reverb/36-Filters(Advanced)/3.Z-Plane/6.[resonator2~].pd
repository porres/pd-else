#N canvas 261 42 1012 723 12;
#X declare -path else;
#N canvas 122 91 603 581 Z-Plane-biquad 0;
#X obj 101 101 cnv 15 450 450 empty empty empty 20 12 1 14 #b8b8b8 #404040 0;
#X obj 176 176 bng 300 1000 1000 0 \$0-bng \$0-bng-set empty 17 7 0 10 #b8b8b8 #ececec #000000;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 101 101 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 176 101 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 251 101 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 326 101 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 401 101 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 476 101 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 101 176 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 176 176 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 251 176 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 326 176 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 401 176 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 476 176 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 101 251 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 176 251 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 251 251 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 326 251 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 401 251 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 476 251 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 101 326 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 176 326 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 251 326 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 326 326 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 401 326 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 476 326 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 101 401 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 176 401 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 251 401 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 326 401 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 401 401 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 476 401 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 101 476 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 176 476 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 251 476 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 326 476 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 401 476 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 75 75 1;
#X restore 476 476 graph;
#X obj 325 101 cnv 1 2 450 empty empty empty 20 12 0 14 #fc0400 #404040 0;
#X obj 100 325 cnv 1 450 2 empty empty empty 20 12 0 14 #fc0400 #404040 0;
#X obj 177 177 cnv 15 15 15 empty \$0-pole1 X 294 150 0 14 #b8b8b8 #404040 0;
#X obj 177 177 cnv 15 15 15 empty \$0-zero1 empty 145 150 0 14 #b8b8b8 #404040 0;
#X obj 177 177 cnv 15 15 15 empty \$0-pole2 empty 294 150 0 14 #b8b8b8 #404040 0;
#X obj 177 177 cnv 15 15 15 empty \$0-zero2 empty 145 150 0 14 #b8b8b8 #404040 0;
#X floatatom 291 27 0 0 0 0 - \$0-im - 0;
#X floatatom 238 27 0 0 0 0 - \$0-re - 0;
#N canvas 136 76 1299 625 GUI 0;
#X obj 117 211 s \$0-P1-im;
#X obj 6 211 s \$0-P1-re;
#X obj 228 211 s \$0-P2-re;
#X obj 339 211 s \$0-P2-im;
#X obj 924 205 s \$0-Z2-im;
#X obj 813 205 s \$0-Z2-re;
#X obj 702 205 s \$0-Z1-im;
#X obj 591 205 s \$0-Z1-re;
#X obj 591 122 expr if (z_pair_\$0 == 1 \, cos($f2 * pi_\$0) * $f1 \, $f1 *2 -1) \; if (z_pair_\$0 == 1 \, sin($f2 * pi_\$0) * $f1 \, 0) \; if (z_pair_\$0 == 1 \, cos($f2 * pi_\$0) * $f1 \, $f2 * 2 -1) \; if (z_pair_\$0 == 1 \, sin($f2 * pi_\$0) * -$f1 \, 0);
#X obj 6 131 expr if (p_pair_\$0 == 1 \, cos($f2 * pi_\$0) * $f1 \, $f1 *2 -1) \; if (p_pair_\$0 == 1 \, sin($f2 * pi_\$0) * $f1 \, 0) \; if (p_pair_\$0 == 1 \, cos($f2 * pi_\$0) * $f1 \, $f2 * 2 -1) \; if (p_pair_\$0 == 1 \, sin($f2 * pi_\$0) * -$f1 \, 0);
#X obj 486 205 s \$0-coef;
#X obj 234 73 trigger bang float;
#X obj 234 45 r \$0-p2-sl;
#X obj 6 104 r \$0-p1-sl;
#X obj 234 101 s \$0-p1-sl-set;
#X obj 1073 156 s \$0-bng-set;
#X obj 1073 106 tgl 15 0 empty empty empty 17 7 0 10 #000000 #fcfcfc #000000 0 1;
#X obj 1073 130 metro 1000;
#X obj 1073 81 loadbang;
#X obj 486 67 r \$0-z1-sl;
#X obj 819 65 trigger bang float;
#X obj 819 37 r \$0-z2-sl;
#X obj 819 93 s \$0-z1-sl-set;
#X obj 486 92 trigger bang float;
#X obj 363 62 r \$0-p2-sl-set;
#X obj 363 85 route set;
#X obj 980 70 route set;
#X obj 980 47 r \$0-z2-sl-set;
#X obj 1004 314 v z_pair_\$0;
#X obj 898 309 v p_pair_\$0;
#X obj 895 274 r \$0-pair_p;
#X obj 1013 271 r \$0-pair_z;
#X obj 629 319 unpack;
#X obj 671 366 s \$0-z2-sl-set;
#X msg 671 344 set \$1;
#X obj 631 449 s \$0-z1-sl-set;
#X msg 629 292 1 \$1;
#X obj 627 365 t f f;
#X obj 678 406 s \$0-pair_z-set;
#X msg 517 397 -1 1 0;
#X obj 517 433 unpack f f f;
#X obj 547 496 s \$0-z2-sl-set;
#X msg 547 474 set \$1;
#X obj 523 542 s \$0-z1-sl-set;
#X obj 465 264 r \$0-type;
#X obj 381 303 sel 3 2;
#X msg 424 378 1;
#X obj 400 527 s \$0-z1-sl-set;
#X obj 418 488 s \$0-pair_z-set;
#X obj 259 428 spigot;
#X msg 350 374 0;
#X obj 354 405 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 284 458 f;
#X obj 385 430 t f b f;
#X obj 286 533 s \$0-z2-sl-set;
#X msg 305 502 set \$1;
#X floatatom 492 324 5 0 0 0 - - - 0;
#X obj 795 459 s \$0-p1-sl-set;
#X msg 828 429 label amp;
#X msg 815 403 label amp_1;
#X msg 953 435 label angle;
#X msg 915 412 label amp_2;
#X obj 920 465 s \$0-p2-sl-set;
#X obj 868 336 sel 0 1;
#X msg 1067 440 label amp;
#X msg 1054 414 label amp_1;
#X msg 1192 446 label angle;
#X msg 1154 423 label amp_2;
#X obj 1107 347 sel 0 1;
#X obj 1034 470 s \$0-z1-sl-set;
#X obj 1159 476 s \$0-z2-sl-set;
#X obj 1166 114 expr atan(1) * 4;
#X obj 1166 145 v pi_\$0;
#X obj 447 327 sel 4;
#X obj 506 364 s \$0-reset;
#X obj 683 490 r \$0-reset;
#X msg 683 513 0.5;
#X obj 688 536 t f f;
#X msg 735 527 0;
#X obj 686 564 t f f;
#X obj 782 543 s \$0-pair_p-set;
#X msg 730 312 set \$1;
#X obj 730 334 s \$0-p2-sl-set;
#X obj 683 590 s \$0-p1-sl-set;
#X connect 8 0 7 0;
#X connect 8 1 6 0;
#X connect 8 2 5 0;
#X connect 8 3 4 0;
#X connect 9 0 1 0;
#X connect 9 1 0 0;
#X connect 9 2 2 0;
#X connect 9 3 3 0;
#X connect 11 0 14 0;
#X connect 11 1 9 1;
#X connect 11 1 49 0;
#X connect 11 1 52 1;
#X connect 12 0 11 0;
#X connect 13 0 9 0;
#X connect 16 0 17 0;
#X connect 17 0 15 0;
#X connect 18 0 16 0;
#X connect 18 0 71 0;
#X connect 19 0 23 0;
#X connect 20 0 22 0;
#X connect 20 1 8 1;
#X connect 21 0 20 0;
#X connect 23 0 10 0;
#X connect 23 1 8 0;
#X connect 24 0 25 0;
#X connect 25 0 9 1;
#X connect 26 0 8 1;
#X connect 27 0 26 0;
#X connect 30 0 29 0;
#X connect 30 0 63 0;
#X connect 31 0 28 0;
#X connect 31 0 68 0;
#X connect 32 0 37 0;
#X connect 32 1 34 0;
#X connect 34 0 33 0;
#X connect 36 0 32 0;
#X connect 37 0 35 0;
#X connect 37 1 38 0;
#X connect 39 0 40 0;
#X connect 40 0 43 0;
#X connect 40 1 42 0;
#X connect 40 2 38 0;
#X connect 42 0 41 0;
#X connect 44 0 45 0;
#X connect 44 0 56 0;
#X connect 45 0 46 0;
#X connect 45 1 39 0;
#X connect 45 1 50 0;
#X connect 45 2 36 0;
#X connect 45 2 50 0;
#X connect 45 2 73 0;
#X connect 46 0 53 0;
#X connect 46 0 51 0;
#X connect 49 0 54 0;
#X connect 50 0 51 0;
#X connect 51 0 49 1;
#X connect 52 0 55 0;
#X connect 53 0 47 0;
#X connect 53 1 52 0;
#X connect 53 2 48 0;
#X connect 55 0 54 0;
#X connect 58 0 57 0;
#X connect 59 0 57 0;
#X connect 60 0 62 0;
#X connect 61 0 62 0;
#X connect 63 0 59 0;
#X connect 63 0 61 0;
#X connect 63 1 58 0;
#X connect 63 1 60 0;
#X connect 64 0 69 0;
#X connect 65 0 69 0;
#X connect 66 0 70 0;
#X connect 67 0 70 0;
#X connect 68 0 65 0;
#X connect 68 0 67 0;
#X connect 68 1 64 0;
#X connect 68 1 66 0;
#X connect 71 0 72 0;
#X connect 73 0 74 0;
#X connect 75 0 76 0;
#X connect 76 0 77 0;
#X connect 77 0 79 0;
#X connect 77 1 34 0;
#X connect 77 1 78 0;
#X connect 77 1 81 0;
#X connect 78 0 38 0;
#X connect 78 0 80 0;
#X connect 79 0 83 0;
#X connect 79 1 35 0;
#X connect 81 0 82 0;
#X restore 354 59 pd GUI;
#N canvas 149 34 458 384 Poles 0;
#X obj 183 305 s \$0-pole1;
#X obj 183 251 pack;
#X msg 183 277 label_pos \$1 \$2;
#X obj 183 165 * 150;
#X obj 180 197 + 150;
#X obj 238 214 + 150;
#X obj 177 224 - 5;
#X obj 190 58 inlet;
#X obj 265 57 inlet;
#X obj 298 120 r \$0-P1-im;
#X obj 61 104 r \$0-P1-re;
#X obj 231 169 * -150;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 1 1;
#X connect 6 0 1 0;
#X connect 7 0 3 0;
#X connect 8 0 11 0;
#X connect 9 0 11 0;
#X connect 10 0 3 0;
#X connect 11 0 5 0;
#X restore 238 62 pd Poles;
#X connect 44 0 47 1;
#X connect 45 0 47 0;
#X coords 0 -1 1 1 452 452 2 100 100;
#X restore 544 259 pd Z-Plane-biquad;
#X obj 162 326 nbx 7 14 1 100 1 1 \$0-Q empty empty 0 -8 0 10 #dcdcdc #000000 #000000 100 256;
#X floatatom 418 281 9 0 0 0 - \$0-im - 0;
#X floatatom 328 281 9 0 0 0 - \$0-re - 0;
#X obj 418 309 v ai;
#X obj 328 309 v ar;
#X text 367 304 coef;
#X text 456 302 coef;
#X text 374 315 re;
#X text 460 314 im;
#X obj 705 169 cpole~, f 10;
#X floatatom 772 144 9 0 0 0 - \$0-im - 0;
#X floatatom 749 121 9 0 0 0 - \$0-re - 0;
#X obj 60 299 nbx 7 14 -1e+37 1e+37 0 0 \$0-freq-send \$0-freq empty 0 -8 0 10 #dcdcdc #000000 #000000 0 256;
#X text 35 296 Hz;
#X obj 185 567 nbx 7 14 1 100 1 0 empty \$0-Q empty 0 -8 0 10 #dcdcdc #000000 #000000 0 256;
#X obj 70 533 nbx 7 14 -1e+37 1e+37 0 0 empty \$0-freq-send empty 0 -8 0 10 #dcdcdc #000000 #000000 0 256;
#X text 728 120 re;
#X text 753 144 im;
#N canvas 416 71 504 506 coefficients 0;
#X obj 173 43 inlet;
#X obj 63 43 inlet;
#X obj 63 128 f;
#X obj 203 221 v cf;
#X obj 63 161 trigger bang float;
#X obj 179 257 s \$0-im;
#X obj 63 257 s \$0-re;
#X obj 203 192 hz2rad;
#X obj 375 224 log;
#X msg 375 194 0.001;
#X obj 375 254 v log001;
#X obj 205 144 v r;
#X obj 294 164 loadbanger 2;
#X obj 294 209 sr~ -khz;
#X obj 294 234 v srkhz;
#X obj 205 112 expr exp(log001 / ($f1 * srkhz));
#X obj 63 200 expr r * cos(cf) \; r * sin(cf);
#X obj 173 77 t b f;
#X text 35 315 The calculation here is quite similar but much more simplified than with [vcf~]. The center frequency is actually calculated the same way and if you paid close attention all we did was convert from hz to radians per sample!, f 62;
#X text 34 386 The real and imaginary part is just \, respectively \, the cosine and sine values of the frequency in radians. You can them realize that the frequency values control the angular position of the pole! On the other hand \, the resonance controls the amplitude., f 62;
#X connect 0 0 17 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 4 0 16 0;
#X connect 4 1 7 0;
#X connect 7 0 3 0;
#X connect 8 0 10 0;
#X connect 9 0 8 0;
#X connect 12 0 13 0;
#X connect 12 1 9 0;
#X connect 13 0 14 0;
#X connect 15 0 11 0;
#X connect 16 0 6 0;
#X connect 16 1 5 0;
#X connect 17 0 2 0;
#X connect 17 1 15 0;
#X restore 60 350 pd coefficients;
#X obj 772 196 out~;
#X obj 662 196 out~;
#X obj 69 623 out~;
#X obj 185 623 out~;
#X obj 573 116 out~;
#X obj 857 116 out~;
#X obj 63 276 hsl 128 15 250 5000 0 0 empty empty empty -2 -8 0 10 #dcdcdc #000000 #000000 0 1;
#X obj 840 14 declare -path else;
#X obj 573 50 fexpr~ $x1 + ar * $y1[-1] - ai * $y2[-1] \; ai * $y1[-1] + ar * $y2[-1];
#X text 131 324 t60;
#X text 25 157 The coefficients are calculated in the subpatch below from frequency and resonant time (instead of Q) values. Hang on a bit and rest assured we'll talk more about resonance time soon. Just note this parameter is the it resonates in ms. Also note that this filter is not well proper to filter a constant sound input \, so we usually have excitation signals \, such as imulses (again \, more about this soon)., f 69;
#X obj 127 556 imp~ 1;
#X obj 165 302 hsl 128 15 0.1 1000 1 0 empty empty empty -2 -8 0 10 #dcdcdc #000000 #000000 0 1;
#X obj 573 17 imp~ 1;
#X obj 705 95 imp~ 1;
#X text 184 352 <-- open for details;
#X text 49 401 When given an impulse \, the filter resonates at an oscillation with the same frequency as the filter input. Note that the real output of the complex filer starts the oscillation at the cosine initial phase \, while the imaginary part starts at the sine initial phase. This is rather intuitive as the real part is also the cosine component of the cartesian form \, while the imaginary part is the sine component., f 61;
#X text 25 26 The [resonator2~] object is a variant of [vcf~] and also based on a one complex pole filter. It can easily be implemented with [cpole~] as we'll see here., f 69;
#X obj 69 591 resonator2~ 500 1;
#X text 306 533 Check the help file of [resonator2~] for more details and compare to the [fexpr~] and [cpole~] versions above to the right. We'll see more about resonator filters soon in this chapter!, f 25;
#X text 25 79 The difference to [vcf~] is that [resonator2~] is a resonant filter. This means there's no gain compensation to have a maximum 0dB value at the center frequency. By the way \, you can refer back to Part 6 (Filters \, Basic) for frequency response plots for both [vcf~] and [resonator2~]., f 69;
#X connect 1 0 19 1;
#X connect 2 0 4 0;
#X connect 3 0 5 0;
#X connect 10 0 21 0;
#X connect 10 1 20 0;
#X connect 11 0 10 3;
#X connect 12 0 10 2;
#X connect 13 0 19 0;
#X connect 15 0 38 2;
#X connect 16 0 38 0;
#X connect 26 0 13 0;
#X connect 28 0 24 0;
#X connect 28 1 25 0;
#X connect 31 0 38 1;
#X connect 32 0 1 0;
#X connect 33 0 28 0;
#X connect 34 0 10 0;
#X connect 38 0 22 0;
#X connect 38 1 23 0;
