#N canvas 532 57 566 618 10;
#X obj 4 331 cnv 3 550 3 empty empty inlets 8 12 0 13 #dcdcdc #000000 0;
#X obj 4 494 cnv 3 550 3 empty empty outlets 8 12 0 13 #dcdcdc #000000 0;
#X obj 4 527 cnv 3 550 3 empty empty arguments 8 12 0 13 #dcdcdc #000000 0;
#X obj 4 591 cnv 15 552 21 empty empty empty 20 12 0 14 #e0e0e0 #202020 0;
#X obj 111 503 cnv 17 3 17 empty empty 0 5 9 0 16 #dcdcdc #9c9c9c 0;
#X obj 111 339 cnv 17 3 78 empty empty 0 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 180 503 signal;
#X obj 225 260 else/out~;
#X obj 2 3 cnv 15 301 42 empty empty formlet~ 20 20 2 37 #e0e0e0 #000000 0;
#X obj 306 4 cnv 15 250 40 empty empty empty 12 13 0 18 #7c7c7c #e0e4dc 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 302 42 1;
#X restore 2 3 graph;
#N canvas 382 141 749 319 (subpatch) 0;
#X coords 0 -1 1 1 252 42 2 0 0;
#X restore 305 3 pd;
#X obj 345 11 cnv 10 10 10 empty empty ELSE 0 15 2 30 #7c7c7c #e0e4dc 0;
#X obj 458 11 cnv 10 10 10 empty empty EL 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 478 11 cnv 10 10 10 empty empty Locus 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 464 26 cnv 10 10 10 empty empty ELSE 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 26 40 cnv 4 4 4 empty empty FOF-like\ resonator\ filter 0 28 2 18 #e0e0e0 #000000 0;
#X obj 111 427 cnv 17 3 17 empty empty 1 5 9 0 16 #dcdcdc #9c9c9c 0;
#X obj 111 450 cnv 17 3 17 empty empty 2 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 186 357 clear;
#X text 229 357 - clears filter's memory if you blow it up;
#X obj 225 165 bng 18 250 50 0 empty empty empty 17 7 0 10 #dcdcdc #000000 #000000;
#X text 229 503 - resonator/filtered signal;
#X msg 168 193 clear;
#X text 175 553 2) float - attack time in ms (default 0), f 55;
#X text 175 570 3) float - decay time in ms (default 0), f 55;
#X obj 111 471 cnv 17 3 17 empty empty 3 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 229 450 - attack time in ms;
#X text 229 471 - decay time in ms;
#X text 175 535 1) float - central frequency in hertz (default 0), f 55;
#N canvas 568 200 762 525 details 0;
#X obj 529 133 else/imp~ 1;
#X obj 601 236 else/out~;
#X obj 471 296 else/out~;
#X obj 471 257 -~;
#X obj 152 304 noise~;
#X obj 152 358 *~;
#X obj 94 149 else/out~;
#X obj 94 87 else/dust~ 5;
#X text 176 81 random excitation, f 10;
#X obj 167 332 else/pulse~ 0.33 0.5;
#X text 578 319 <= compare;
#X text 530 259 compare =>;
#X obj 65 436 else/out~;
#X obj 65 391 else/formlet~ 400 100 1000, f 13;
#X obj 152 391 else/formlet~ 700 500 2000, f 13;
#X obj 381 199 else/resonator~ 500 1000, f 15;
#X obj 486 199 else/resonator~ 500 100, f 15;
#X obj 601 187 else/formlet~ 500 100 1000, f 13;
#X obj 94 117 else/formlet~ 1000 25 1000;
#X text 26 19 The resonance parameter is specified by the decay time \, like the [resonant~] object. For formant synthesis \, this control a so called bandwidth parameter along with the attack time., f 44;
#X text 23 235 The filter acts as a 'resonator' \, where it resonates at the resonant frequency for a period of time after the input signal has ceased. This is also known as center or formant frequency., f 52;
#X text 327 19 The [formlet~] object could be implemented from two [resonator~] objects \, where the signal from the [resonator~] object that has the decay parameter is subtracted by the signal from another that has the attack paranmeter. The difference is that [formlet~] has a gain adjustment so the maximum value is equal to the impulse. If the attack time is the same as the decay time \, then the signal gets canceled out. If the attack time is greater than the decay time \, then the polarity of the impulse response is inverted., f 66;
#X obj 543 446 else/out~;
#X obj 543 388 else/imp~ 100;
#X obj 543 417 else/formlet~ 450 10 100, f 26;
#X text 330 389 For formant synthesis \, you can use an impulse generator with the fundamental frequency to trigger the resonant impulse response grains. The filter frequency is then the formant frequency and attack+decay control the bandwidth., f 30;
#X connect 0 0 16 1;
#X connect 0 0 15 1;
#X connect 0 0 17 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 13 0;
#X connect 5 0 14 0;
#X connect 7 0 18 0;
#X connect 9 0 5 1;
#X connect 13 0 12 0;
#X connect 14 0 12 1;
#X connect 15 0 3 0;
#X connect 16 0 3 1;
#X connect 17 0 1 0;
#X connect 18 0 6 0;
#X connect 23 0 24 0;
#X connect 24 0 22 0;
#X restore 467 240 pd details;
#X obj 225 194 else/impseq~;
#X text 247 166 <-- excite the resonator;
#X text 23 168 see also:;
#X obj 22 189 else/resonator~;
#X obj 22 210 else/resonant~;
#X obj 225 228 else/formlet~ 1100 10 200;
#X text 180 427 signal;
#N canvas 601 204 731 441 multichannel 0;
#X obj 97 187 sig~ 500 1000;
#X obj 72 329 else/out.mc~;
#X obj 122 219 sig~ 5 10;
#X obj 72 288 else/formlet~;
#X obj 147 254 sig~ 50 100;
#X obj 72 153 else/dust~ -ch 2 15;
#X text 34 33 The object outputs the same number of channels as the input with most channels. If other inputs also have more than one channel \, the number channels must match. A single value gets repeated to meet the number of multichannels., f 35;
#X obj 272 123 knob 50 100 10000 1 500 empty empty #dfdfdf #7c7c7c #000000 1 0 0 0 1 320 0 0 100 empty empty 0 8 0 0 0 1 0 0 0 0;
#X obj 272 180 else/pack2;
#X obj 398 350 else/out.mc~;
#X listbox 272 204 17 0 0 0 - - - 0;
#X obj 329 123 knob 50 100 10000 1 1100 empty empty #dfdfdf #7c7c7c #000000 1 0 0 0 1 320 0 0 100 empty empty 0 8 0 0 0 1 0 0 0 0;
#X obj 398 123 knob 50 5 100 1 5 empty empty #dfdfdf #7c7c7c #000000 1 0 0 0 1 320 0 0 5 empty empty 0 8 0 0 0 1 0 0 0 0;
#X obj 398 180 else/pack2;
#X listbox 398 204 17 0 0 0 - - - 0;
#X obj 272 232 else/insert freq;
#X obj 455 123 knob 50 5 100 1 10 empty empty #dfdfdf #7c7c7c #000000 1 0 0 0 1 320 0 0 5 empty empty 0 8 0 0 0 1 0 0 0 0;
#X obj 398 232 else/insert attack;
#X obj 528 180 else/pack2;
#X listbox 528 204 17 0 0 0 - - - 0;
#X obj 528 232 else/insert decay, f 11;
#X obj 585 123 knob 50 5 100 1 100 empty empty #dfdfdf #7c7c7c #000000 1 0 0 0 1 320 0 0 5 empty empty 0 8 0 0 0 1 0 0 0 0;
#X obj 528 123 knob 50 5 100 1 50 empty empty #dfdfdf #7c7c7c #000000 1 0 0 0 1 320 0 0 5 empty empty 0 8 0 0 0 1 0 0 0 0;
#X obj 408 258 else/imp~ 2;
#X obj 398 316 else/formlet~;
#X text 318 51 The 'freq' \, 'attack' and 'decay' messages can be used to set values for one or more channels. The number of values set the number of channels., f 44;
#X connect 0 0 3 1;
#X connect 2 0 3 2;
#X connect 3 0 1 0;
#X connect 4 0 3 3;
#X connect 5 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 10 0 15 0;
#X connect 11 0 8 1;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 17 0;
#X connect 15 0 24 0;
#X connect 16 0 13 1;
#X connect 17 0 24 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 24 0;
#X connect 21 0 18 1;
#X connect 22 0 18 0;
#X connect 23 0 24 0;
#X connect 24 0 9 0;
#X restore 437 263 pd multichannel;
#X text 162 339 signal(s);
#X text 162 450 signal(s);
#X text 162 471 signal(s);
#X text 150 372 freq <list>;
#X text 229 372 - resonant frequency in Hertz for each channel;
#X text 138 386 attack <list>;
#X text 229 386 - attack time in ms for each channel;
#X text 144 401 decay <list>;
#X text 229 401 - decay time in ms for each channel;
#X obj 22 231 else/formant~;
#X obj 22 251 else/paf~;
#X text 228 338 - excitation signal;
#X text 229 426 - central frequency in Hertz;
#N canvas 874 271 455 473 example 0;
#X obj 81 341 else/group~ 1 1;
#X obj 81 370 else/out~;
#X obj 157 235 else/initmess freq 500 790 1000 \, attack 5 10 7 \, decay 50 100 75, f 32;
#X obj 81 306 else/formlet~;
#X obj 81 197 mtof~;
#X obj 81 162 +~;
#X obj 130 159 osc~ 4;
#X obj 130 180 *~ 0.1;
#X obj 81 241 else/blip~;
#X obj 81 129 sig~ 60;
#X text 91 49 An example with a vibrato to better emulate a vocal sound and using a band limited impulse ([blip~]) as the filter input., f 45;
#X text 199 124 With multichannel signals you can set different formant regions for the same funcdamental. Use the [group~] object to mixdown the multichannel output into a single normalized channel., f 34;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 4 0 8 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 7 0 5 1;
#X connect 8 0 3 0;
#X connect 9 0 5 0;
#X restore 467 286 pd example;
#X text 60 89 Based on SuperCollider's Formlet UGen \, [formlet~] is a resonant filter similar to [resonator~] in bandpass mode (and [resonant~] by extension). The difference is that you you can also specify an attack time besides the decay time. An advantage to this filter over FOF is that there is no limit to the number of overlapping grains., f 79;
#X obj 22 272 else/formfm~;
#X obj 22 292 else/packet~;
#X connect 21 0 31 0;
#X connect 23 0 36 0;
#X connect 31 0 36 0;
#X connect 36 0 7 0;
