#N canvas 500 60 562 588 10;
#X obj 1 560 cnv 15 552 21 empty \$0-pddp.cnv.footer empty 20 12 0 14 #dcdcdc #404040 0;
#X obj 1 306 cnv 3 550 3 empty \$0-pddp.cnv.inlets inlets 8 12 0 13 #dcdcdc #000000 0;
#X obj 1 439 cnv 3 550 3 empty \$0-pddp.cnv.outlets outlets 8 12 0 13 #dcdcdc #000000 0;
#X obj 1 470 cnv 3 550 3 empty \$0-pddp.cnv.argument arguments 8 12 0 13 #dcdcdc #000000 0;
#X obj 105 314 cnv 17 3 120 empty \$0-pddp.cnv.let.0 0 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 156 477 1) float;
#X text 156 493 2) float;
#X obj 305 4 cnv 15 250 40 empty empty empty 12 13 0 18 #7c7c7c #e0e4dc 0;
#N canvas 382 141 749 319 (subpatch) 0;
#X coords 0 -1 1 1 252 42 2 100 100;
#X restore 304 3 pd;
#X obj 344 11 cnv 10 10 10 empty empty ELSE 0 15 2 30 #7c7c7c #e0e4dc 0;
#X obj 22 40 cnv 4 4 4 empty empty Retune\ partials 0 28 2 18 #e0e0e0 #000000 0;
#X obj 457 11 cnv 10 10 10 empty empty EL 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 477 11 cnv 10 10 10 empty empty Locus 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 514 11 cnv 10 10 10 empty empty Solus' 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 463 26 cnv 10 10 10 empty empty ELSE 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 501 26 cnv 10 10 10 empty empty library 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 207 239 else/out~;
#X text 153 314 signal(s);
#X text 183 328 list;
#X text 123 385 bypass <float>;
#X text 214 385 - non zero bypasses the input signal, f 47;
#X text 214 400 - resets FFT window and overlap, f 47;
#X text 147 400 fft <f \, f>;
#X text 129 414 frange <f \, f>;
#X text 214 414 - sets frequency range, f 47;
#X text 214 342 - transposition ratio, f 47;
#X obj 105 447 cnv 17 3 17 empty \$0-pddp.cnv.let.1 0 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 153 447 signal(s);
#X text 214 477 - FFT window (default 2048), f 47;
#X text 214 493 - FFT ovrerlap (default 8), f 47;
#X text 156 508 3) float;
#X text 214 508 - transposition ratio (default 1), f 47;
#X text 156 524 4) float;
#X text 156 539 5) float;
#X text 214 539 - interpolation (default 1), f 47;
#X text 214 524 - amplitude synthesis threshold (default 0), f 47;
#X obj 207 211 else/pvretune~ 4096 8 1 0 1;
#X obj 157 159 noise~;
#X obj 157 181 *~ 0.1;
#X text 214 356 - amplitude synthesis threshold (0 to 1), f 47;
#X text 214 371 - interpolation (0 to 1), f 47;
#X text 214 314 - input(s) to be retuned, f 47;
#X text 214 447 - resynthesised output(s), f 47;
#X text 123 356 thresh <float>;
#X text 123 371 interp <float>;
#X text 123 342 transp <float>;
#X text 214 328 - list of frequencies to retune to, f 47;
#X text 45 87 [pvretune~] retunes partials of an input sound and resynthesises via a phase vocoder oscilattor bank. The default is the 12-tone equal temperament but you can set any arbitrary scale with a list of frequencies. This is based on Eric Lyon's [fftease/pvtuner~]. There's support for multichanels., f 77;
#X msg 207 159 fft 2048 4;
#X msg 221 181 fft 4096 8;
#X text 296 162 reset FFT parameters, f 11;
#N canvas 818 202 307 327 multichannels 0;
#X obj 88 91 else/white~ -ch 2;
#X obj 88 243 else/out.mc~;
#X text 44 26 There's support for multichannel inputs. The same number of outputs is generated., f 34;
#X obj 88 172 else/pvretune~;
#X obj 88 204 else/tanh~;
#X obj 104 118 else/initmess thresh 0.75 \, transp 0.2, f 13;
#X connect 0 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 3 0;
#X restore 426 261 pd multichannels;
#X obj 2 3 cnv 15 301 42 empty empty pvretune~ 20 20 2 37 #e0e0e0 #000000 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 302 42 1 0 0;
#X restore 2 3 graph;
#N canvas 573 163 794 435 details 0;
#X obj 116 355 else/out~;
#X obj 63 180 noise~;
#X msg 136 243 thresh \$1;
#X floatatom 136 220 5 0 0 0 - - - 0;
#X floatatom 206 220 5 0 0 0 - - - 0;
#X msg 206 243 transp \$1;
#X obj 206 159 else/knob 50 0.25 1.5 0 1 empty empty #dfdfdf #7c7c7c #000000 1 0 0 0 1 320 0 0 1 empty empty 0 12 0 -15 0 1 0 0 0 0;
#X obj 136 159 else/knob 50 0 1 0 0 empty empty #dfdfdf #7c7c7c #000000 1 0 0 0 1 320 0 0 0 empty empty 0 12 0 -15 0 1 0 0 0 0;
#X obj 116 327 else/tanh~;
#X text 36 24 The threshold value (from 0 to 1) sets the amplitude threshold above which the partials will be resynthesized. Therefore \, partials below this threshold will simply be ignored and not resynthesized nor retuned. There's a transposition ratio parameter for the resynthesized partials.;
#N canvas 384 38 868 592 scales 0;
#X obj 64 117 frac2dec;
#X msg 64 57 1 9/8 5/4 4/3 3/2 27/16 15/8 2;
#X text 284 57 diatonic;
#X text 439 306 eastern;
#X msg 40 28 1 9/8 81/64 3/2 27/16 2;
#X text 210 28 pentatonic;
#X obj 136 207 ratio2cents;
#X msg 136 118 1 1.25 1.5 1.875 2;
#X text 416 444 m6;
#X msg 280 442 0 300 700 800 1200;
#X text 272 120 M7;
#X msg 267 409 0 500 700 900 1200;
#X text 403 411 M6;
#X text 292 150 m7;
#X msg 156 148 1 1.2 1.5 1.7818 2;
#X msg 166 178 1 1.25 1.5 1.7818 2;
#X text 310 180 7;
#X msg 83 87 1 9/8 6/5 4/3 3/2 8/5 9/5 2;
#X text 285 87 minor;
#X text 415 376 pentaclust;
#X msg 250 376 0 100 200 300 400 1200;
#X msg 231 346 0 50 100 150 200 250 300 350 1200;
#X text 472 344 quarterclust;
#X text 444 277 pelog;
#X msg 154 246 0 171.288 314.198 587.452 718.038 829.841 1005.05 1200;
#X text 542 247 slendro;
#X msg 187 278 0 244.969 506.68 738.5 974.751 1200;
#X obj 136 515 outlet;
#X text 589 320 set the MIDI note for the base frequency of the current scale, f 30;
#X floatatom 600 415 5 0 0 0 - - - 0;
#X obj 600 365 initmess A0;
#X msg 600 448 base \$1;
#X msg 214 307 0 100 400 500 700 800 1100 1200;
#X obj 600 391 note2midi;
#X connect 0 0 6 0;
#X connect 1 0 0 0;
#X connect 4 0 0 0;
#X connect 6 0 27 0;
#X connect 7 0 6 0;
#X connect 9 0 27 0;
#X connect 11 0 27 0;
#X connect 14 0 6 0;
#X connect 15 0 6 0;
#X connect 17 0 0 0;
#X connect 20 0 27 0;
#X connect 21 0 27 0;
#X connect 24 0 27 0;
#X connect 26 0 27 0;
#X connect 29 0 31 0;
#X connect 30 0 33 0;
#X connect 32 0 27 0;
#X connect 33 0 29 0;
#X restore 502 173 pd scales;
#X obj 517 205 bng 22 250 50 0 empty empty empty 0 -10 0 12 #dfdfdf #000000 #000000;
#X obj 517 237 else/scala diamond7.scl, f 12;
#X obj 619 272 bng 22 250 50 0 empty empty empty 0 -10 0 12 #dfdfdf #000000 #000000;
#X msg 425 230 \$1 2;
#X floatatom 425 206 5 0 0 0 - - - 0;
#X msg 393 173 7;
#X msg 425 173 12;
#X msg 459 173 13;
#N canvas 433 202 604 288 diatonic 0;
#X msg 68 84 32.625 36.4726 40.9036 43.4989 48.7835 54.5367 61.357 65.25 72.9451 81.8072 86.9977 97.5671 109.073 122.714 130.5 145.89 163.614 173.995 195.134 218.147 245.428 261 291.78 327.229 347.991 390.268 436.294 490.856 522 583.561 654.458 695.982 780.537 872.588 981.712 1044 1167.12 1308.92 1391.96 1561.07 1745.18 1963.42 2088 2334.24 2617.83 2783.93 3122.15 3490.35 3926.85 4176 4668.49 5235.66 5567.86 6244.29 6980.7 7853.7;
#X obj 68 46 inlet;
#X obj 68 210 outlet;
#X text 121 45 any scale can be specified as a list of frequencies;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X restore 619 304 pd diatonic werkmeisterIII;
#X f 14;
#X obj 502 294 else/scale2freq -base 69, f 15;
#X obj 425 256 else/eqdiv;
#X obj 619 246 loadbang;
#X floatatom 276 220 5 0 0 0 - - - 0;
#X obj 276 159 else/knob 50 0 1 0 0 empty empty #dfdfdf #7c7c7c #000000 1 0 0 0 1 320 0 0 0 empty empty 0 12 0 -15 0 1 0 0 0 0;
#X msg 276 243 interp \$1;
#X text 414 23 You can use [else/scale2freq] to generate lists for [pvretune~] \, check its help file. Other useful objects include [eqdiv] and [scala]. By default \, the internal scale is 12 tone equal temperament. Below you can set other types. At loadbang \, we insert a diatonic scale based on "Werkmeister III"., f 51;
#X text 414 95 You can interpolate between scale \, from 0 to 1 \, where 0 is the previous scale and 1 is the current one., f 51;
#X obj 619 349 s \$0-pvretune~;
#X obj 116 120 r \$0-pvretune~;
#X obj 290 370 s \$0-pvretune~;
#X msg 290 339 bypass \$1;
#X obj 290 309 tgl 19 0 empty empty empty 0 -8 0 10 #dfdfdf #000000 #000000 0 1;
#X text 317 310 Bypass the input;
#X obj 116 296 else/pvretune~;
#X connect 1 0 34 0;
#X connect 2 0 34 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 34 0;
#X connect 6 0 4 0;
#X connect 7 0 3 0;
#X connect 8 0 0 0;
#X connect 10 0 20 0;
#X connect 11 0 12 0;
#X connect 12 0 20 0;
#X connect 13 0 19 0;
#X connect 14 0 21 0;
#X connect 15 0 14 0;
#X connect 16 0 15 0;
#X connect 17 0 15 0;
#X connect 18 0 15 0;
#X connect 19 0 28 0;
#X connect 20 0 28 0;
#X connect 21 0 20 0;
#X connect 22 0 13 0;
#X connect 23 0 25 0;
#X connect 24 0 23 0;
#X connect 25 0 34 0;
#X connect 29 0 34 0;
#X connect 31 0 30 0;
#X connect 32 0 31 0;
#X connect 34 0 8 0;
#X restore 461 239 pd details;
#X connect 36 0 16 0;
#X connect 37 0 38 0;
#X connect 38 0 36 0;
#X connect 48 0 36 0;
#X connect 49 0 36 0;
